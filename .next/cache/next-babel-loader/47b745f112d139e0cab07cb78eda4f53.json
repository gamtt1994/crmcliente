{"ast":null,"code":"var _jsxFileName = \"D:\\\\Descargas\\\\Crmcliente\\\\Crmcliente\\\\pages\\\\clientes.js\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/layout\";\nimport React, { useState } from \"react\";\nimport { gql, useQuery } from \"@apollo/client\";\nimport { useRouter } from \"next/router\";\nimport ClienteLista from \"../components/cliente\";\nimport Link from \"next/link\";\nimport $ from \"jquery\";\nconst OBTENER_CLIENTES_USUARIOS = gql`\n  query obtenerClientesVendedor {\n    obtenerClientesVendedor {\n      id\n      nombre\n      apellido\n      empresa\n      email\n    }\n  }\n`;\n\nconst Clientes = () => {\n  const router = useRouter();\n  const {\n    data,\n    loading,\n    client\n  } = useQuery(OBTENER_CLIENTES_USUARIOS);\n  var state = {\n    querySet: data,\n    page: 1,\n    rows: 5,\n    window: 5\n  };\n\n  function pagination(data, page, rows) {\n    var trimStart = (page - 1) * rows;\n    var trimEnd = trimStart + rows;\n    var trimmedData = data(trimStart, trimEnd);\n    var pages = Math.round(data.length / rows);\n    return {\n      querySet: trimmedData,\n      pages: pages\n    };\n  }\n\n  function pageButtons(pages) {\n    var wrapper = document.getElementById(\"pagination-wrapper\");\n    wrapper.innerHTML = ``;\n    console.log(\"Pages:\", pages);\n    var maxLeft = state.page - Math.floor(state.window / 2);\n    var maxRight = state.page + Math.floor(state.window / 2);\n\n    if (maxLeft < 1) {\n      maxLeft = 1;\n      maxRight = state.window;\n    }\n\n    if (maxRight > pages) {\n      maxLeft = pages - (state.window - 1);\n\n      if (maxLeft < 1) {\n        maxLeft = 1;\n      }\n\n      maxRight = pages;\n    }\n\n    for (var page = maxLeft; page <= maxRight; page++) {\n      wrapper.innerHTML += `<button value=${page} class=\"page btn btn-sm btn-info\">${page}</button>`;\n    }\n\n    if (state.page != 1) {\n      wrapper.innerHTML = `<button value=${1} class=\"page btn btn-sm btn-info\">&#171; First</button>` + wrapper.innerHTML;\n    }\n\n    if (state.page != pages) {\n      wrapper.innerHTML += `<button value=${pages} class=\"page btn btn-sm btn-info\">Last &#187;</button>`;\n    }\n\n    $(\".page\").on(\"click\", function () {\n      $(\"#table-body\").empty();\n      state.page = Number($(this).val());\n      buildTable();\n    });\n  }\n\n  function buildTable() {\n    var table = $(\"#table-body\");\n    var data = pagination(state.data, state.page, state.rows);\n    var myList = data.querySet;\n    var i = 1;\n\n    for (i in myList) {\n      //Keep in mind we are using \"Template Litterals to create rows\"\n      var row = `<tr>\n                  <td>${myList[i].rank}</td>\n                  <td>${myList[i].first_name}</td>\n                  <td>${myList[i].last_name}</td>\n                  `;\n      table.append(row);\n    }\n\n    pageButtons(data.pages);\n  }\n\n  if (loading) {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, __jsx(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, __jsx(\"h1\", {\n      className: \"text-2xl text-gray-800 font-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, \"Clientes\"), __jsx(Link, {\n      href: \"/nuevocliente\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }, __jsx(\"a\", {\n      className: \"bg-blue-800 py-2 px-5 mt-3 inline-block text-white rounded text-sm hover:bg-gray-800 mb-3 uppercase\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }, \"Nuevo Cliente\")), __jsx(\"table\", {\n      className: \"table-auto shadow-md mt-10 w-full w-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }, __jsx(\"thead\", {\n      className: \"bg-gray-800\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, __jsx(\"tr\", {\n      className: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, __jsx(\"th\", {\n      className: \"w-1/5 py-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, \" Nombre\"), __jsx(\"th\", {\n      className: \"w-1/5 py-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, \" Empresa\"), __jsx(\"th\", {\n      className: \"w-1/5 py-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, \" Email\"), __jsx(\"th\", {\n      className: \"w-1/5 py-2\",\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, \"Acci\\xF3n\"))), __jsx(\"tbody\", {\n      className: \"border border-light-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, __jsx(\"tr\", {\n      className: \"animate-pulse  space-x-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 19\n      }\n    }))), __jsx(\"tr\", {\n      className: \"animate-pulse  space-x-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }\n    }))), __jsx(\"tr\", {\n      className: \"animate-pulse  space-x-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }, __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    })), __jsx(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"h-4 bg-gray-400 rounded w-4/6 m-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n  if (!data.obtenerClientesVendedor) {\n    client.clearStore();\n    router.push(\"/\");\n    return __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  buildTable();\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 5\n    }\n  }, __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    className: \"text-2xl text-gray-800 font-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, \"Clientes\"), __jsx(Link, {\n    href: \"/nuevocliente\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, __jsx(\"a\", {\n    className: \"bg-blue-800 py-2 px-5 mt-3 inline-block text-white rounded text-sm hover:bg-gray-800 mb-3 uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, \"Nuevo Cliente\")), __jsx(\"table\", {\n    className: \"table-auto shadow-md mt-10 w-full w-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, __jsx(\"thead\", {\n    className: \"bg-gray-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }, __jsx(\"tr\", {\n    className: \"text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, __jsx(\"th\", {\n    className: \"w-0/5 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 15\n    }\n  }, \"Codigo\"), __jsx(\"th\", {\n    className: \"w-1/5 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, \" Nombre\"), __jsx(\"th\", {\n    className: \"w-1/5 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }\n  }, \" Empresa\"), __jsx(\"th\", {\n    className: \"w-1/5 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }, \" Email\"), __jsx(\"th\", {\n    className: \"w-1/5 py-2\",\n    colSpan: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 15\n    }\n  }, \"Acci\\xF3n\"))), __jsx(\"tbody\", {\n    className: \"bg-white\",\n    id: \"table-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    class: \"container \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    id: \"pagination-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Clientes;","map":{"version":3,"sources":["D:/Descargas/Crmcliente/Crmcliente/pages/clientes.js"],"names":["Layout","React","useState","gql","useQuery","useRouter","ClienteLista","Link","$","OBTENER_CLIENTES_USUARIOS","Clientes","router","data","loading","client","state","querySet","page","rows","window","pagination","trimStart","trimEnd","trimmedData","pages","Math","round","length","pageButtons","wrapper","document","getElementById","innerHTML","console","log","maxLeft","floor","maxRight","on","empty","Number","val","buildTable","table","myList","i","row","rank","first_name","last_name","append","obtenerClientesVendedor","clearStore","push"],"mappings":"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","sourcesContent":["import Layout from \"../components/layout\";\r\nimport React, { useState } from \"react\";\r\nimport { gql, useQuery } from \"@apollo/client\";\r\nimport { useRouter } from \"next/router\";\r\nimport ClienteLista from \"../components/cliente\";\r\nimport Link from \"next/link\";\r\n\r\nimport $ from \"jquery\";\r\n\r\nconst OBTENER_CLIENTES_USUARIOS = gql`\r\n  query obtenerClientesVendedor {\r\n    obtenerClientesVendedor {\r\n      id\r\n      nombre\r\n      apellido\r\n      empresa\r\n      email\r\n    }\r\n  }\r\n`;\r\n\r\nconst Clientes = () => {\r\n  const router = useRouter();\r\n  const { data, loading, client } = useQuery(OBTENER_CLIENTES_USUARIOS);\r\n\r\n  var state = {\r\n    querySet: data,\r\n\r\n    page: 1,\r\n    rows: 5,\r\n    window: 5,\r\n  };\r\n\r\n  function pagination(data, page, rows) {\r\n    var trimStart = (page - 1) * rows;\r\n    var trimEnd = trimStart + rows;\r\n\r\n    var trimmedData = data(trimStart, trimEnd);\r\n\r\n    var pages = Math.round(data.length / rows);\r\n\r\n    return {\r\n      querySet: trimmedData,\r\n      pages: pages,\r\n    };\r\n  }\r\n\r\n  function pageButtons(pages) {\r\n    var wrapper = document.getElementById(\"pagination-wrapper\");\r\n\r\n    wrapper.innerHTML = ``;\r\n    console.log(\"Pages:\", pages);\r\n\r\n    var maxLeft = state.page - Math.floor(state.window / 2);\r\n    var maxRight = state.page + Math.floor(state.window / 2);\r\n\r\n    if (maxLeft < 1) {\r\n      maxLeft = 1;\r\n      maxRight = state.window;\r\n    }\r\n\r\n    if (maxRight > pages) {\r\n      maxLeft = pages - (state.window - 1);\r\n\r\n      if (maxLeft < 1) {\r\n        maxLeft = 1;\r\n      }\r\n      maxRight = pages;\r\n    }\r\n\r\n    for (var page = maxLeft; page <= maxRight; page++) {\r\n      wrapper.innerHTML += `<button value=${page} class=\"page btn btn-sm btn-info\">${page}</button>`;\r\n    }\r\n\r\n    if (state.page != 1) {\r\n      wrapper.innerHTML =\r\n        `<button value=${1} class=\"page btn btn-sm btn-info\">&#171; First</button>` +\r\n        wrapper.innerHTML;\r\n    }\r\n\r\n    if (state.page != pages) {\r\n      wrapper.innerHTML += `<button value=${pages} class=\"page btn btn-sm btn-info\">Last &#187;</button>`;\r\n    }\r\n\r\n    $(\".page\").on(\"click\", function () {\r\n      $(\"#table-body\").empty();\r\n\r\n      state.page = Number($(this).val());\r\n\r\n      buildTable();\r\n    });\r\n  }\r\n\r\n  function buildTable() {\r\n    var table = $(\"#table-body\");\r\n\r\n    var data = pagination(state.data, state.page, state.rows);\r\n    var myList = data.querySet;\r\n    var i = 1;\r\n    for (i in myList) {\r\n      //Keep in mind we are using \"Template Litterals to create rows\"\r\n      var row = `<tr>\r\n                  <td>${myList[i].rank}</td>\r\n                  <td>${myList[i].first_name}</td>\r\n                  <td>${myList[i].last_name}</td>\r\n                  `;\r\n      table.append(row);\r\n    }\r\n\r\n    pageButtons(data.pages);\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div>\r\n        <Layout>\r\n          <h1 className=\"text-2xl text-gray-800 font-light\">Clientes</h1>\r\n\r\n          <Link href=\"/nuevocliente\">\r\n            <a className=\"bg-blue-800 py-2 px-5 mt-3 inline-block text-white rounded text-sm hover:bg-gray-800 mb-3 uppercase\">\r\n              Nuevo Cliente\r\n            </a>\r\n          </Link>\r\n\r\n          <table className=\"table-auto shadow-md mt-10 w-full w-lg\">\r\n            <thead className=\"bg-gray-800\">\r\n              <tr className=\"text-white\">\r\n                <th className=\"w-1/5 py-2\"> Nombre</th>\r\n                <th className=\"w-1/5 py-2\"> Empresa</th>\r\n                <th className=\"w-1/5 py-2\"> Email</th>\r\n                <th className=\"w-1/5 py-2\" colSpan=\"2\">\r\n                  Acción\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"border border-light-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto\">\r\n              <tr className=\"animate-pulse  space-x-4\">\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n              </tr>\r\n              <tr className=\"animate-pulse  space-x-4\">\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n              </tr>\r\n              <tr className=\"animate-pulse  space-x-4\">\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </Layout>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!data.obtenerClientesVendedor) {\r\n    client.clearStore();\r\n    router.push(\"/\");\r\n    return <p>Loading...</p>;\r\n  }\r\n\r\n  buildTable();\r\n\r\n  return (\r\n    <div>\r\n      <Layout>\r\n        <h1 className=\"text-2xl text-gray-800 font-light\">Clientes</h1>\r\n\r\n        <Link href=\"/nuevocliente\">\r\n          <a className=\"bg-blue-800 py-2 px-5 mt-3 inline-block text-white rounded text-sm hover:bg-gray-800 mb-3 uppercase\">\r\n            Nuevo Cliente\r\n          </a>\r\n        </Link>\r\n        <table className=\"table-auto shadow-md mt-10 w-full w-lg\">\r\n          <thead className=\"bg-gray-800\">\r\n            <tr className=\"text-white\">\r\n              <th className=\"w-0/5 py-2\">Codigo</th>\r\n              <th className=\"w-1/5 py-2\"> Nombre</th>\r\n              <th className=\"w-1/5 py-2\"> Empresa</th>\r\n              <th className=\"w-1/5 py-2\"> Email</th>\r\n              <th className=\"w-1/5 py-2\" colSpan=\"2\">\r\n                Acción\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white\" id=\"table-body\"></tbody>\r\n        </table>\r\n        <div class=\"container \">\r\n          <div id=\"pagination-wrapper\"></div>\r\n        </div>\r\n      </Layout>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Clientes;\r\n"]},"metadata":{},"sourceType":"module"}