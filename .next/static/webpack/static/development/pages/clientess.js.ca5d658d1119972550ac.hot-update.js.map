{"version":3,"file":"static/webpack/static\\development\\pages\\clientess.js.ca5d658d1119972550ac.hot-update.js","sources":["webpack:///./pages/clientess.js"],"sourcesContent":["import Layout from \"../components/layout\";\r\nimport React, { useState, useEffect, useSelector } from \"react\";\r\nimport { gql, useQuery, useMutation } from \"@apollo/client\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport MaterialTable from \"material-table\";\r\nimport Swal from \"sweetalert2\";\r\nconst OBTENER_CLIENTES_USUARIOS = gql`\r\n  query obtenerClientesVendedor {\r\n    obtenerClientesVendedor {\r\n      id\r\n      nombre\r\n      apellido\r\n      empresa\r\n      email\r\n    }\r\n  }\r\n`;\r\n\r\nconst ELIMINAR_CLIENTE = gql`\r\n  mutation eliminarCliente($id: ID!) {\r\n    eliminarCliente(id: $id)\r\n  }\r\n`;\r\n\r\nconst OBTENER_CLIENTES_USUARIO = gql`\r\n  query obtenerClientesVendedor {\r\n    obtenerClientesVendedor {\r\n      id\r\n      nombre\r\n      apellido\r\n      empresa\r\n      email\r\n    }\r\n  }\r\n`;\r\n\r\nconst Clientess = () => {\r\n  const router = useRouter();\r\n  const { data, loading, client } = useQuery(OBTENER_CLIENTES_USUARIOS);\r\n\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE, {\r\n    update(cache) {\r\n      const { obtenerClientesVendedor } = cache.readQuery({\r\n        query: OBTENER_CLIENTES_USUARIO,\r\n      });\r\n\r\n      cache.writeQuery({\r\n        query: OBTENER_CLIENTES_USUARIO,\r\n        data: {\r\n          obtenerClientesVendedor: obtenerClientesVendedor.filter(\r\n            (clienteActual) => clienteActual.id !== id\r\n          ),\r\n        },\r\n      });\r\n    },\r\n  });\r\n\r\n  const confirmarEliminarCliente = (rowData) => {\r\n    var id = rowData.id;\r\n    console.log(id);\r\n    Swal.fire({\r\n      title: \"¿Deseas eliminar a este cliente?\",\r\n      text: \"Esta acción no se puede deshacer\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Si, Eliminar\",\r\n      cancelButtonText: \"No, Cancelar\",\r\n    }).then(async (result) => {\r\n      if (result.value) {\r\n        try {\r\n          const { data } = await eliminarCliente({\r\n            variables: {\r\n              id,\r\n            },\r\n          });\r\n\r\n          Swal.fire(\"Eliminado!\", data.eliminarCliente, \"success\");\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const editarCliente = (rowData) => {\r\n    var id = rowData.id;\r\n    router.push({\r\n      pathname: \"/editarcliente/[id]\",\r\n      query: { id },\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div>\r\n        <Layout>\r\n          <h1 className=\"text-2xl text-gray-800 font-light\">Clientes</h1>\r\n\r\n          <Link href=\"/nuevocliente\">\r\n            <a className=\"bg-blue-800 py-2 px-5 mt-3 inline-block text-white rounded text-sm hover:bg-gray-800 mb-3 uppercase\">\r\n              Nuevo Cliente\r\n            </a>\r\n          </Link>\r\n\r\n          <table className=\"table-auto shadow-md mt-10 w-full w-lg\">\r\n            <thead className=\"bg-gray-800\">\r\n              <tr className=\"text-white\">\r\n                <th className=\"w-1/5 py-2\"> Nombre</th>\r\n                <th className=\"w-1/5 py-2\"> Empresa</th>\r\n                <th className=\"w-1/5 py-2\"> Email</th>\r\n                <th className=\"w-1/5 py-2\" colSpan=\"2\">\r\n                  Acción\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"border border-light-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto\">\r\n              <tr className=\"animate-pulse  space-x-4\">\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n              </tr>\r\n              <tr className=\"animate-pulse  space-x-4\">\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n              </tr>\r\n              <tr className=\"animate-pulse  space-x-4\">\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n                <td>\r\n                  <p className=\"h-4 bg-gray-400 rounded w-4/6 m-5 \"></p>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </Layout>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!data.obtenerClientesVendedor) {\r\n    client.clearStore();\r\n    router.push(\"/\");\r\n    return <p>Loading...</p>;\r\n  }\r\n  const editable = JSON.parse(JSON.stringify(data));\r\n  return (\r\n    <div>\r\n      <Layout>\r\n        <h1 className=\"text-2xl text-gray-800 font-light\">Clientes</h1>\r\n\r\n        <Link href=\"/nuevocliente\">\r\n          <a className=\"bg-blue-800 py-2 px-5 mt-3 inline-block text-white rounded text-sm hover:bg-gray-800 mb-3 uppercase\">\r\n            Nuevo Cliente\r\n          </a>\r\n        </Link>\r\n        <div className=\"overflow-x-scroll\">\r\n          <MaterialTable\r\n            columns={[\r\n              { title: \"Nombre\", field: \"nombre\" },\r\n              { title: \"Apellido\", field: \"apellido\" },\r\n              { title: \"Empresa\", field: \"empresa\" },\r\n              { title: \"Email\", field: \"email\" },\r\n            ]}\r\n            data={editable.obtenerClientesVendedor}\r\n            actions={[\r\n              (rowData) => ({\r\n                icon: \"edit\",\r\n                tooltip: \"edit User\",\r\n                onClick: () => editarCliente(rowData),\r\n              }),\r\n              (rowData) => ({\r\n                icon: \"delete\",\r\n                tooltip: \"Delete User\",\r\n                onClick: () => confirmarEliminarCliente(rowData),\r\n              }),\r\n            ]}\r\n            title=\"Clientes\"\r\n          />\r\n        </div>\r\n      </Layout>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Clientess;\r\n"],"mappings":"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","sourceRoot":""}